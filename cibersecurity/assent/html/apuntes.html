<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <title>Apuntes | Humb3rt0Sec</title>
    <link
      rel="icon"
      type="image/png"
      sizes="64x64"
      href="./../image/jpg/L_Carlos-removebg-preview.png"
    />
    <link rel="stylesheet" href="./../css/apuntes.css" />
  </head>
  <body>
    <noscript>
      <div
        style="
          background: #ffdddd;
          color: #660000;
          padding: 10px;
          text-align: center;
        "
      >
        JavaScript estÃ¡ deshabilitado. Habilita JavaScript para que la
        aplicaciÃ³n funcione correctamente.
      </div>
    </noscript>

    <header class="encabezado">
      <h1>Apuntes TÃ©cnicos</h1>
      <div class="auth-section">
        <div id="user-info" class="usuario-info" style="display: none">
          <img id="user-photo" src="" alt="Foto de perfil" class="avatar" />
          <span id="user-email" class="correo"></span>
          <button id="logout-btn" class="btn cerrar-sesion" type="button">
            Cerrar sesiÃ³n
          </button>
        </div>
        <button id="login-btn" class="btn iniciar-sesion" type="button">
          Iniciar sesiÃ³n con Google
        </button>
      </div>
    </header>

    <main class="contenedor-principal">
      <!-- Formulario para crear apuntes -->
      <section id="formulario-container" class="formulario oculto">
        <h2>Crear nuevo apunte</h2>
        <form id="apunte-form" enctype="multipart/form-data">
          <input
            type="text"
            id="titulo"
            placeholder="TÃ­tulo del apunte"
            required
          />
          <textarea
            id="descripcion"
            placeholder="DescripciÃ³n del apunte"
            required
          ></textarea>
          <div id="comandos-container">
            <input
              type="text"
              class="comando-input"
              placeholder="Comando Ãºtil (opcional)"
            />
          </div>
          <button
            type="button"
            id="agregar-comando"
            class="btn btn-primary mt-2"
          >
            âž• Agregar comando
          </button>
          <input
            type="text"
            id="fuentes"
            placeholder="Fuente / enlace (opcional)"
          />
          <input
            type="text"
            id="sistema"
            placeholder="Sistema Operativo (Linux, Windows...)"
          />

          <div id="notificacion" class="notificacion oculto"></div>

          <div class="file-group">
            <label for="imagen">ðŸ“· Subir imagen desde tu dispositivo:</label>
            <div class="file-upload-wrapper">
              <label for="imagen" class="file-upload-label"
                >Elegir imagen</label
              >
              <input type="file" id="imagen" accept="image/*" />
              <span id="nombre-archivo" class="nombre-archivo"
                >NingÃºn archivo seleccionado</span
              >
            </div>
          </div>

          <label for="color">Selecciona mÃ©todo de estudio:</label>
          <select id="color">
            <option value="rojo">ðŸ”´ Ciberseguridad</option>
            <option value="azul">ðŸ”µ Redes</option>
            <option value="verde">ðŸŸ¢ Python</option>
            <option value="amarillo">ðŸŸ¡ Apuntes Generales</option>
          </select>

          <button type="submit" id="guardar-btn" class="btn guardar">
            Guardar apunte
          </button>
        </form>
      </section>

      <!-- Filtro por color -->
      <section id="filtros" class="filtros">
        <label for="filtro-color">Filtrar por mÃ©todo de estudio:</label>
        <select id="filtro-color">
          <option value="todos">Todos</option>
          <option value="rojo">ðŸ”´ Ciberseguridad</option>
          <option value="azul">ðŸ”µ Redes</option>
          <option value="verde">ðŸŸ¢ Python</option>
          <option value="amarillo">ðŸŸ¡ Apuntes varios</option>
        </select>
      </section>

      <!-- Lista de tarjetas -->
      <section id="lista-apuntes">
        <h2>Todos los apuntes</h2>
        <div id="apuntes-container" class="contenedor-apuntes"></div>
      </section>
    </main>

    <footer class="footer">
      <p>&copy; 2025 Humb3rt0Sec. Todos los derechos reservados.</p>
    </footer>

    <!-- Debug helper (Ãºtil para depuraciÃ³n local) -->
    <script>
      (function () {
        // Activa el panel visible si accedes con ?debug=1 en la URL
        window.APP_DEBUG = location.search.includes("debug=1");
        const createDebugPanel = () => {
          const panel = document.createElement("div");
          panel.id = "debug-log";
          panel.style.cssText =
            "position:fixed;right:12px;bottom:12px;background:rgba(0,0,0,0.75);color:#fff;padding:8px;border-radius:6px;max-width:360px;z-index:99999;display:none;max-height:40vh;overflow:auto;font-size:12px;";
          document.body.appendChild(panel);
        };
        createDebugPanel();
        window.logDebug = function (msg) {
          console.log("[APUNTES DEBUG]", msg);
          const el = document.getElementById("debug-log");
          if (!el) return;
          const line = document.createElement("div");
          line.textContent = "[" + new Date().toLocaleTimeString() + "] " + msg;
          el.appendChild(line);
          if (window.APP_DEBUG) el.style.display = "block";
        };
        window.logDebug("HTML cargado");
      })();
    </script>

    <div class="center">
      <a href="/cibersecurity/blog.html" class="btn regresar"> Regresar</a>
    </div>

    <!-- Scripts -->
    <script type="module" src="./../src/js/firebase-init.js"></script>
    <script type="module" src="./../src/js/apuntes.js"></script>
  </body>
</html>
